"0",""
"0","delay_data_all <- rio::import(""/Volumes/devbrainlab/ABCD_Data/ABCD4pt0/abcd_yddss01.txt"")%>%"
"0","  filter(!collection_title==""collection_title"") %>%"
"0","  select(src_subject_id, interview_age, eventname, ddis_scr_val_immedcho,"
"0","         ddis_scr_val_indif_point_6h, ddis_scr_val_indif_pnt_1da,"
"0","         ddis_scr_val_indif_pnt_1week,ddis_scr_val_indif_pnt_1mth, ddis_scr_val_indif_pnt_3mth,"
"0","         ddis_scr_val_indif_pnt_1yr,ddis_scr_val_indif_pnt_5yr)%>%"
"0","  mutate(src_subject_id=as.factor(src_subject_id),"
"0","         interview_age=as.numeric(interview_age),"
"0","         ddis_scr_val_immedcho = as.numeric(ddis_scr_val_immedcho),"
"0","         ddis_scr_val_indif_pnt_1mth=as.numeric(ddis_scr_val_indif_pnt_1mth))"
"2","|--------------------------------------------------|
|"
"2","=============="
"2","======="
"2","======="
"2","======="
"2","======="
"2","========"
"2","|
"
"0","cols.num <- c(""ddis_scr_val_indif_point_6h"", ""ddis_scr_val_indif_pnt_1da"",""ddis_scr_val_indif_pnt_1week"", ""ddis_scr_val_indif_pnt_1mth"", ""ddis_scr_val_indif_pnt_3mth"", ""ddis_scr_val_indif_pnt_1yr"", ""ddis_scr_val_indif_pnt_5yr"")"
"0","delay_data_all[cols.num] <- sapply(delay_data_all[cols.num],as.numeric)"
"0","sapply(delay_data_all, class)"
"1","              src_subject_id "
"1","               interview_age "
"1","                   eventname "
"1","       ddis_scr_val_immedcho "
"1"," ddis_scr_val_indif_point_6h "
"1","
"
"1","                    ""factor"" "
"1","                   ""numeric"" "
"1","                 ""character"" "
"1","                   ""numeric"" "
"1","                   ""numeric"" "
"1","
"
"1","  ddis_scr_val_indif_pnt_1da "
"1","ddis_scr_val_indif_pnt_1week "
"1"," ddis_scr_val_indif_pnt_1mth "
"1"," ddis_scr_val_indif_pnt_3mth "
"1","  ddis_scr_val_indif_pnt_1yr "
"1","
"
"1","                   ""numeric"" "
"1","                   ""numeric"" "
"1","                   ""numeric"" "
"1","                   ""numeric"" "
"1","                   ""numeric"" "
"1","
"
"1","  ddis_scr_val_indif_pnt_5yr "
"1","
"
"1","                   ""numeric"" "
"1","
"
"0","#delay expressed as proportion of maximum delay"
"0","#subjective value expressed as proportion of nominal amount (subjective value divided by actual, delayed amount)"
"0","    d0 = .25/1825"
"0","    d1 = .75/1825"
"0","    d2 = 6/1825"
"0","    d3 = 23/1825"
"0","    d4 = 60/1825"
"0","    d5 = 275/1825"
"0","    d6 = 1460/1825"
"0",""
"0","delay_data_all <- delay_data_all %>% "
"0","  mutate(crit_1 = ((ddis_scr_val_indif_pnt_1da - ddis_scr_val_indif_point_6h) > 20) |"
"0","((ddis_scr_val_indif_pnt_1week - ddis_scr_val_indif_pnt_1da) > 20) |"
"0","((ddis_scr_val_indif_pnt_1mth - ddis_scr_val_indif_pnt_1week) > 20) |"
"0","((ddis_scr_val_indif_pnt_3mth - ddis_scr_val_indif_pnt_1mth) > 20) |"
"0","((ddis_scr_val_indif_pnt_1yr - ddis_scr_val_indif_pnt_3mth) > 20) |"
"0","((ddis_scr_val_indif_pnt_5yr - ddis_scr_val_indif_pnt_1yr) > 20)) %>% "
"0","  mutate(crit_2 = (ddis_scr_val_indif_pnt_5yr > (ddis_scr_val_indif_point_6h-10))) %>% "
"0","  mutate(exclude = crit_1 & crit_2) %>% "
"0","  filter(exclude==""FALSE"") %>%  #end exclusion, start calculating AUC"
"0","  drop_na(ddis_scr_val_indif_point_6h, ddis_scr_val_indif_pnt_1da, ddis_scr_val_indif_pnt_1week, ddis_scr_val_indif_pnt_1mth,"
"0","          ddis_scr_val_indif_pnt_3mth, ddis_scr_val_indif_pnt_1yr, ddis_scr_val_indif_pnt_5yr) %>% "
"0","  mutate(ddis_scr_val_indif_point_6h = ddis_scr_val_indif_point_6h/100,"
"0","         ddis_scr_val_indif_pnt_1da = ddis_scr_val_indif_pnt_1da/100,"
"0","         ddis_scr_val_indif_pnt_1week = ddis_scr_val_indif_pnt_1week/100,"
"0","         ddis_scr_val_indif_pnt_1mth = ddis_scr_val_indif_pnt_1mth/100,"
"0","          ddis_scr_val_indif_pnt_3mth = ddis_scr_val_indif_pnt_3mth/100,"
"0","         ddis_scr_val_indif_pnt_1yr = ddis_scr_val_indif_pnt_1yr/100,"
"0","         ddis_scr_val_indif_pnt_5yr = ddis_scr_val_indif_pnt_5yr/100"
"0","         ) %>% "
"0","      mutate(dd_int0 = d0*((1+ddis_scr_val_indif_point_6h)/2),"
"0","             dd_int1 = d1*((ddis_scr_val_indif_point_6h + ddis_scr_val_indif_pnt_1da)/2),"
"0","             dd_int2 = d2*((ddis_scr_val_indif_pnt_1da + ddis_scr_val_indif_pnt_1week)/2),"
"0","             dd_int3 = d3*((ddis_scr_val_indif_pnt_1week + ddis_scr_val_indif_pnt_1mth)/2),"
"0","             dd_int4 = d4*((ddis_scr_val_indif_pnt_1mth + ddis_scr_val_indif_pnt_3mth)/2),"
"0","             dd_int5 = d5*((ddis_scr_val_indif_pnt_3mth + ddis_scr_val_indif_pnt_1yr)/2),"
"0","             dd_int6 = d6*((ddis_scr_val_indif_pnt_1yr + ddis_scr_val_indif_pnt_5yr)/2),"
"0","             auc = dd_int0 + dd_int1 + dd_int2 + dd_int3 + dd_int4 + dd_int5 + dd_int6) %>% "
"0","     #filter(auc_2 >= 0) %>%  #end AUC, calculate mean indifference point"
"0","     mutate(mean_indifference = rowMeans(select(., c(ddis_scr_val_indif_point_6h, ddis_scr_val_indif_pnt_1da, ddis_scr_val_indif_pnt_1week,"
"0","                                                     ddis_scr_val_indif_pnt_1mth, ddis_scr_val_indif_pnt_3mth, ddis_scr_val_indif_pnt_1yr,"
"0","                                                     ddis_scr_val_indif_pnt_5yr))))"
"0","##"
"0",""
"0","ggplot(delay_data_all, aes(x=auc))+"
"0","  geom_histogram()"
